<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Mobileä¸Šé£èµ·çš„ç¥ç»ç½‘ç»œ-TensorFlowç¯‡ | Tsui&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="â€œæœ€è¿‘å°è¯•å°†TensorFlowå…¬å¼€çš„Android Camera DemoæŠ˜è…¾åˆ°äº†è®¾å¤‡ä¸Šé¢ç©äº†ä¸€æŠŠï¼Œå¹´çºªå¤§äº†ï¼Œä¸æ•´ç†ä¸‹ï¼Œåé¢ä¸€å®šä¼šå¿˜è®°â€ğŸ¤¦â€â™€ï¸ï¸&quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="Mobileä¸Šé£èµ·çš„ç¥ç»ç½‘ç»œ-TensorFlowç¯‡">
<meta property="og:url" content="http://yoursite.com/2017/11/14/2017-11-14-TensorflowLiteForAndroid-post/index.html">
<meta property="og:site_name" content="Tsui&#39;s Blog">
<meta property="og:description" content="â€œæœ€è¿‘å°è¯•å°†TensorFlowå…¬å¼€çš„Android Camera DemoæŠ˜è…¾åˆ°äº†è®¾å¤‡ä¸Šé¢ç©äº†ä¸€æŠŠï¼Œå¹´çºªå¤§äº†ï¼Œä¸æ•´ç†ä¸‹ï¼Œåé¢ä¸€å®šä¼šå¿˜è®°â€ğŸ¤¦â€â™€ï¸ï¸&quot;">
<meta property="og:updated_time" content="2017-12-31T14:22:52.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mobileä¸Šé£èµ·çš„ç¥ç»ç½‘ç»œ-TensorFlowç¯‡">
<meta name="twitter:description" content="â€œæœ€è¿‘å°è¯•å°†TensorFlowå…¬å¼€çš„Android Camera DemoæŠ˜è…¾åˆ°äº†è®¾å¤‡ä¸Šé¢ç©äº†ä¸€æŠŠï¼Œå¹´çºªå¤§äº†ï¼Œä¸æ•´ç†ä¸‹ï¼Œåé¢ä¸€å®šä¼šå¿˜è®°â€ğŸ¤¦â€â™€ï¸ï¸&quot;">
  
    <link rel="alternate" href="/atom.xml" title="Tsui&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Tsui&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2017-11-14-TensorflowLiteForAndroid-post" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/14/2017-11-14-TensorflowLiteForAndroid-post/" class="article-date">
  <time datetime="2017-11-14T09:49:53.000Z" itemprop="datePublished">2017-11-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Mobileä¸Šé£èµ·çš„ç¥ç»ç½‘ç»œ-TensorFlowç¯‡
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>æœ¬ç¯‡åªæ˜¯ç®€å•çš„è®°å½•äº†ä¸€ä¸‹å°†TensorFlowå…¬å¼€å‡ºæ¥çš„Android Camera Demoè¿è¡Œèµ·æ¥çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚<br>å…³äºTensorFlowçš„sourceçš„è§£è¯»ï¼Œäº‰å–ä»Šå¹´å†…èƒ½èµ·ä¸ªå¤´å§ï½ï½<br>æœ¬ç¯‡å¤§è‡´æŒ‰ç…§ä»¥ä¸‹ç« èŠ‚æ¥ä»‹ç»ä¸€å“ˆå­  </p>
<ul>
<li>æˆ‘çš„ç¼–è¯‘ç¯å¢ƒ  </li>
<li>TensorFlowçš„æºç åœ¨å“ªé‡Œ  </li>
<li>æ„å»ºå·¥å…·-bazel  </li>
<li>ç¼–è¯‘Android Camera Demoè¿˜éœ€è¦å“ªäº›é…ç½®  </li>
<li>Android Camera Demoç”¨åˆ°çš„çš„å››ä¸ªæ¨¡å‹  </li>
<li>Android Camera Demoçš„ç¼–è¯‘å’Œäº§ç‰©</li>
<li>å‚è€ƒèµ„æ–™</li>
</ul>
<h1 id="è¨€å½’æ­£ä¼ "><a href="#è¨€å½’æ­£ä¼ " class="headerlink" title="è¨€å½’æ­£ä¼ "></a>è¨€å½’æ­£ä¼ </h1><h2 id="I-æˆ‘çš„ç¼–è¯‘ç¯å¢ƒ"><a href="#I-æˆ‘çš„ç¼–è¯‘ç¯å¢ƒ" class="headerlink" title="I. æˆ‘çš„ç¼–è¯‘ç¯å¢ƒ"></a>I. æˆ‘çš„ç¼–è¯‘ç¯å¢ƒ</h2><p>æˆ‘å…¶å®ä¸çˆ±åƒè‹¹æœï¼Œä¹Ÿä¸çˆ±åƒç±³ï½ï½  </p>
<hr>
<p>MacBook Pro<br>Processor 2.4 GHz Intel Core i5<br>Memory 8GN 1600 MHz DDR3<br>macOS High Sierra (Version 10.13.2 Beta)</p>
<hr>
<h2 id="II-TensorFlowçš„æºç "><a href="#II-TensorFlowçš„æºç " class="headerlink" title="II. TensorFlowçš„æºç "></a>II. TensorFlowçš„æºç </h2><p>TensorFlowçš„æºç æ‰˜ç®¡åœ¨Githubä¸Šé¢ï¼Œæºç åœ°å€å¦‚ä¸‹ï¼š<br><a href="https://github.com/tensorflow/tensorflow" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow</a></p>
<p>å…¶ä¸­Android Camera Demoåœ°å€å¦‚ä¸‹ï¼š<br><a href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/android" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/android</a></p>
<p>è¿™é‡Œé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬åªæƒ³ç¼–è¯‘å®‰å“ç‰ˆçš„apkï¼Œæ˜¯ä¸æ˜¯åªè¦æŠŠandroidçš„éƒ¨åˆ†çš„sourceæä¸‹æ¥å°±å¯ä»¥äº†å‘¢ã€‚<br>ä½†æ˜¯ï¼Œè²Œä¼¼æ˜¯ä¸è¡Œçš„ã€‚<br>TensorFlowçš„ç¼–è¯‘éƒ½æ˜¯ä½¿ç”¨Bazelæ¥è¿›è¡Œçš„ï¼Œè€Œç¼–è¯‘æ—¶androidç‰ˆçš„ç¼–è¯‘éœ€è¦ä½¿ç”¨åˆ°çš„SDKå’ŒNDKçš„è·¯å¾„çš„é…ç½®éƒ½æ˜¯åœ¨<br>tensorFlowæ•´ä¸ªå·¥ç¨‹çš„WORKSPACEæ–‡ä»¶ä¸­æŒ‡å®šçš„ã€‚<br>è€Œä¸”ï¼Œä»gitä¸Šé¢cloneä»£ç çš„æ—¶å€™ï¼Œä¼¼ä¹ä¹Ÿåªèƒ½gitæ•´ä¸ªtensorflowçš„å·¥ç¨‹ä¸‹æ¥ã€‚  </p>
<p>æ‰€ä»¥è¿™é‡Œï¼Œæˆ‘ä»¬æ¥æ•²ä¸€æŠŠä¸‹é¢çš„å‘½ä»¤å°†TensorFlowçš„sourceç»™cloneä¸‹æ¥å…ˆï½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:tensorflow/tensorflow.git</span><br></pre></td></tr></table></figure></p>
<h2 id="III-æ„å»ºå·¥å…·-bazel"><a href="#III-æ„å»ºå·¥å…·-bazel" class="headerlink" title="III. æ„å»ºå·¥å…·-bazel"></a>III. æ„å»ºå·¥å…·-bazel</h2><p><strong>é—®1:æ„å»ºå·¥å…·æ˜¯ç¥é©¬?</strong><br><strong>å›ç­”ï¼š</strong><br>æ„å»ºå·¥å…·æ˜¯ä¸€ä¸ªå°†æºä»£ç ç”Ÿæˆå¯æ‰§è¡Œåº”ç”¨ç¨‹åºçš„è¿‡ç¨‹è‡ªåŠ¨åŒ–çš„ç¨‹åºã€‚<br>ä¸€èˆ¬æ„å»ºå·¥å…·çš„å¥—è·¯å°±æ˜¯åˆ›å»ºä¸€ç¥¨çš„taskï¼Œæ¯ä¸ªtaskä¼šè´Ÿè´£å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œä¾‹å¦‚ï¼šä¸‹è½½ä¾èµ–ã€ç¼–è¯‘ã€æ‰“åŒ…ã€éƒ¨ç½²ç­‰ç­‰ã€‚<br>æ„å»ºå·¥å…·çš„ä½¿å‘½å°±æ˜¯å°†ä¿ºä»¬ä»æ¯ç‡¥é‡å¤çš„æ— è„‘å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œè®²çœŸï¼Œåªè¦ä½ taskè®¾è®¡çš„å¥½ï¼Œæµç¨‹è®¾è®¡çš„å¥½ï¼Œä½¿ç”¨æ„å»ºå·¥å…·å…¶å®å¯ä»¥é¿å¼€ä¸€äº›ä½çº§çš„é”™è¯¯ã€‚<br>å¸¸è§çš„æ„å»ºå·¥å…·æ¯”å¦‚ï¼šGradleã€Mavenã€Antã€Gruntã€Gulfç­‰ç­‰<br><a href="https://en.wikipedia.org/wiki/List_of_build_automation_software" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/List_of_build_automation_software</a></p>
<p><strong><em>Bazel</em></strong>ä¹Ÿæ˜¯æ„å»ºå·¥å…·å¤§å†›ä¸­çš„ä¸€æšå°å°†ï½</p>
<p><strong>é—®2ï¼šä¸ºå•¥TensorFlowååé€‰ä¸­äº†Bazelå‘¢ï¼Ÿ</strong><br><strong>å›ç­”ï¼š</strong><br>ä½ çŒœçŒœTensorFlowå§“å•¥ï¼ŸBazelåˆå§“å•¥ï¼Ÿ<br>å…¶å®è°·å®¶çš„Bazelè²Œä¼¼è¿˜æ˜¯æŒºå¥½ç”¨çš„ï¼Œæ”¯æŒå¤šå¹³å°ï¼Œä¸Šåˆ°æœåŠ¡å™¨åº”ç”¨ä¸‹åˆ°ç§»åŠ¨ç«¯åº”ç”¨ã€‚<br>infoqä¸Šé¢æœ‰ä¸€ç¯‡15å¹´çš„çŸ­æ–‡ï¼Œç®€è¦çš„ä»‹ç»äº†ä¸‹è°·å®¶çš„Bazelã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»çœ‹ä¸€çœ‹ã€‚<br><a href="http://www.infoq.com/cn/news/2015/03/google-open-source-bazel" target="_blank" rel="noopener">http://www.infoq.com/cn/news/2015/03/google-open-source-bazel</a></p>
<p><strong>é—®3: Bazelæ€ä¹ˆå®‰è£…?</strong><br><strong>å›ç­”ï¼š</strong>  </p>
<ol>
<li>æ‰¾åˆ°Bazelçš„å®‰è£…è„šæœ¬<br>Bazelä¹Ÿæ˜¯æ‰˜ç®¡åœ¨GitHubä¸Šé¢çš„<br><a href="https://github.com/bazelbuild/bazel" target="_blank" rel="noopener">https://github.com/bazelbuild/bazel</a><br>å¯¹åº”çš„releasesé¡µé¢<br><a href="https://github.com/bazelbuild/bazel/releases" target="_blank" rel="noopener">https://github.com/bazelbuild/bazel/releases</a><br>ä»â†‘çš„é¡µé¢ä¸Šæ‰¾åˆ°ä½ ç¼–è¯‘æœºå™¨é…ç½®å¯¹åº”çš„Bazelå®‰è£…è„šæœ¬ï¼Œæä¸‹æ¥<br>æ¯”å¦‚æˆ‘çš„Macå¯¹åº”çš„ç‰ˆæœ¬æ˜¯ï¼šbazel-0.7.0-installer-darwin-x86_64.sh</li>
<li><p>ç»™Bazelçš„å®‰è£…è„šæœ¬è¿½åŠ æƒé™</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chomd +x bazel-0.7.0-installer-darwin-x86_64.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰§è¡Œè„šæœ¬ï¼Œå®ŒæˆBazelçš„å®‰è£…</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bazel-0.7.0-installer-darwin-x86_64.sh --user</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¡®è®¤å®‰è£…ç»“æœ<br>æ­¤æ—¶æ­¤åˆ»ï¼Œä½ æ‰§è¡Œä¸€ä¸‹</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bazel version</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>å¾—åˆ°ä»¥ä¸‹è¾“å‡ºçš„è¯ï¼Œå°±è¯´æ˜ä½ çš„å®‰è£…å¦¥å¦¥çš„äº†<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Build label: 0.7.0</span><br><span class="line">Build target: bazel-out/darwin_x86_64-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar</span><br><span class="line">Build time: Wed Oct 18 14:25:46 2017 (1508336746)</span><br><span class="line">Build timestamp: 1508336746</span><br><span class="line">Build timestamp as int: 1508336746</span><br></pre></td></tr></table></figure></p>
<h2 id="IV-ç¼–è¯‘Android-Camera-Demoè¿˜éœ€è¦å“ªäº›é…ç½®"><a href="#IV-ç¼–è¯‘Android-Camera-Demoè¿˜éœ€è¦å“ªäº›é…ç½®" class="headerlink" title="IV. ç¼–è¯‘Android Camera Demoè¿˜éœ€è¦å“ªäº›é…ç½®"></a>IV. ç¼–è¯‘Android Camera Demoè¿˜éœ€è¦å“ªäº›é…ç½®</h2><h2 id="1-Android-SDK"><a href="#1-Android-SDK" class="headerlink" title="1. Android SDK  "></a>1. Android SDK  </h2><p>æˆ‘è¿™è¾¹ä½¿ç”¨çš„SDKå’Œå¯¹åº”çš„ç‰ˆæœ¬å¦‚ä¸‹ï¼š  </p>
<pre><code>- SDK Tools           26.1.1
- SDK Build-Tools     26.0.2
- SDK Platform-Tools  26.0.2  
</code></pre><p>  æˆ‘éƒ½æ˜¯ç›´æ¥é€šè¿‡AndroidStudio3é¢„è§ˆç‰ˆçš„SDKmanageræ¥ä¸‹çš„<br>  AndroidStudioçš„SDKmanagerä¼šå°†è¿™äº›ä¸œè¥¿ä¸‹åˆ°ä½ åœ¨AndrooidStudioé‡Œé¢æŒ‡å®šçš„SDKçš„è·¯å¾„ä¿å­˜å¥½</p>
<h2 id="2-Android-NDK"><a href="#2-Android-NDK" class="headerlink" title="2. Android NDK  "></a>2. Android NDK  </h2><p>NDKæˆ‘ç”¨çš„r14b<br><a href="https://dl.google.com/android/repository/android-ndk-r14b-darwin-x86_64.zip" target="_blank" rel="noopener">https://dl.google.com/android/repository/android-ndk-r14b-darwin-x86_64.zip</a><br>è¿™è¾¹ä¸‹å¥½çš„NDKè§£å‹åï¼Œè®°å½•ä¸‹å­˜æ”¾è·¯å¾„<br>æ³¨ï¼‰<br>ä¸€å¼€å§‹æˆ‘ç”¨æœ€æ–°ç‰ˆçš„NDKæ¥ç¼–è¯‘ï¼Œæ­»æ´»ç¼–è¯‘ä¸è¿‡å»ã€‚å„ç§å¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é”™è¯¯ã€‚<br>stackoverflowä¸Šé¢æœäº†ä¸€æŠŠï¼Œå¤§éƒ½é—®é¢˜è·‘å‡ºæ¥ï¼Œå´æœ¨æœ‰ç­”æ¡ˆã€‚<br>æœ€åä¸€ä¸ªç‰ˆæœ¬ä¸€ä¸ªç‰ˆæœ¬çš„å°†NDKé™çº§ï¼Œåˆ°äº†r14bè¿™å„¿ç»ˆäºç¼–è¿‡å»äº†ã€‚ç¼–å¾—æˆ‘æ»¡è„¸è€æ³ªã€‚ã€‚ã€‚  </p>
<h2 id="3-å°†SDKå’ŒNDKçš„pathååº”åˆ°é¡¹ç›®ä¸­"><a href="#3-å°†SDKå’ŒNDKçš„pathååº”åˆ°é¡¹ç›®ä¸­" class="headerlink" title="3. å°†SDKå’ŒNDKçš„pathååº”åˆ°é¡¹ç›®ä¸­"></a>3. å°†SDKå’ŒNDKçš„pathååº”åˆ°é¡¹ç›®ä¸­</h2><h3 id="æ–¹å¼1-WORKSPACEæ–‡ä»¶çš„ä¿®æ”¹"><a href="#æ–¹å¼1-WORKSPACEæ–‡ä»¶çš„ä¿®æ”¹" class="headerlink" title="æ–¹å¼1 : WORKSPACEæ–‡ä»¶çš„ä¿®æ”¹"></a>æ–¹å¼1 : WORKSPACEæ–‡ä»¶çš„ä¿®æ”¹</h3><p>TensorFlowçš„æœ€ä¸Šå±‚æœ‰ä¸€ä¸ªWORKSPACEæ–‡ä»¶ã€‚<br>å› ä¸ºæ‰€æœ‰çš„Bazelçš„æ„å»ºéƒ½æ˜¯åŸºäºä¸€ä¸ªworkspaceçš„ï¼Œè¿™ä¸ªworkspaceé‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„æºç ç›®å½•ã€æ„å»ºåçš„è¾“å‡ºç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚<br>workspaceçš„æ ¹ç›®å½•ä¸‹éœ€è¦å­˜åœ¨ä¸€ä¸ªworkspaceçš„é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶åï¼šWORKSPACEã€‚<br>WORKSPACEæ–‡ä»¶é‡Œé¢å¯ä»¥æŒ‡å®šä¸€äº›å¤–éƒ¨æ„å»ºè¾“å‡ºéœ€è¦çš„ä¾èµ–å…³ç³»ã€ä½†è¿™äº›å†…å®¹ä¸æ˜¯å¿…é¡»çš„ï¼Œå³ä¾¿æ˜¯ç©ºæ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚  </p>
<p>   TensorFlowè¿™è¾¹çš„WORKSPACEæ–‡ä»¶ä¸­å°†ä¸€äº›å’ŒAndroid Camera Demoç›¸å…³çš„ä¾èµ–ä¿¡æ¯åŠ åœ¨äº†é‡Œé¢<br>   æ¯”å¦‚ä¸‹é¢è¿™ä¸€æ®µï¼Œgithubä¸Šcloneä¸‹æ¥çš„æºç ï¼Œä»¥ä¸‹éƒ¨åˆ†éƒ½æ˜¯æ³¨é‡Šæ‰çš„ï¼Œ<br>   ç¼–è¯‘å®‰å“ç‰ˆçš„è¯ï¼Œéœ€è¦å¤§å®¶å°†è‡ªå·±ç¼–è¯‘æœºä¸Šé¢é…ç½®çš„SDKå’ŒNDKçš„ç›¸å…³ä¿¡æ¯ååº”åˆ°WORKSPACEæ–‡ä»¶ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"># Uncomment and update the paths in these entries to build the Android demo.</span><br><span class="line">android_sdk_repository(</span><br><span class="line">    name = &quot;androidsdk&quot;,</span><br><span class="line">    api_level = 23,</span><br><span class="line">    # Ensure that you have the build_tools_version below installed in the</span><br><span class="line">    # SDK manager as it updates periodically.</span><br><span class="line">    build_tools_version = &quot;26.0.2&quot;,</span><br><span class="line">    # Replace with path to Android SDK on your system</span><br><span class="line">    path = &quot;/Users/cristinagreen/Library/Android/sdk&quot;,</span><br><span class="line">)</span><br><span class="line">#</span><br><span class="line">android_ndk_repository(</span><br><span class="line">    name=&quot;androidndk&quot;,</span><br><span class="line">    path=&quot;/Users/cristinagreen/Library/Android/ndk&quot;,</span><br><span class="line">#    # This needs to be 14 or higher to compile TensorFlow.</span><br><span class="line">#    # Please specify API level to &gt;= 21 to build for 64-bit</span><br><span class="line">#    # archtectures or the Android NDK will automatically select biggest</span><br><span class="line">#    # API level that it supports without notice.</span><br><span class="line">#    # Note that the NDK version is not the API level.</span><br><span class="line">    api_level=14)</span><br><span class="line">```  </span><br><span class="line">### æ–¹å¼2 : è®¾ç½®ç¯å¢ƒå˜é‡ ###   </span><br><span class="line">  å¦‚æœWORKSPACEæ–‡ä»¶ä½ ä»€ä¹ˆéƒ½ä¸æ”¹çš„è¯ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ    </span><br><span class="line">  /tensorflow/tensorflow/tools/ci_build/builds/builds_common.sh  </span><br><span class="line">  ä¸­æœ‰è¿™ä¹ˆä¸€æ®µ</span><br><span class="line"></span><br><span class="line"> ~~~~~~~</span><br><span class="line">configure_android_workspace() &#123;</span><br><span class="line">  # Modify the WORKSPACE file.</span><br><span class="line">  # Note: This is workaround. This should be done by bazel.</span><br><span class="line">  if grep -q &apos;^android_sdk_repository&apos; WORKSPACE &amp;&amp; grep -q &apos;^android_ndk_repository&apos; WORKSPACE; then</span><br><span class="line">    echo &quot;You probably have your WORKSPACE file setup for Android.&quot;</span><br><span class="line">  else</span><br><span class="line">    if [ -z &quot;$&#123;ANDROID_API_LEVEL&#125;&quot; -o -z &quot;$&#123;ANDROID_BUILD_TOOLS_VERSION&#125;&quot; ] || \</span><br><span class="line">        [ -z &quot;$&#123;ANDROID_SDK_HOME&#125;&quot; -o -z &quot;$&#123;ANDROID_NDK_HOME&#125;&quot; ]; then</span><br><span class="line">      echo &quot;ERROR: Your WORKSPACE file does not seems to have proper android&quot;</span><br><span class="line">      echo &quot;       configuration and not all the environment variables expected&quot;</span><br><span class="line">      echo &quot;       inside ci_build android docker container are set.&quot;</span><br><span class="line">      echo &quot;       Please configure it manually. See: https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/android/README.md&quot;</span><br><span class="line">    else</span><br><span class="line">      cat &lt;&lt; EOF &gt;&gt; WORKSPACE</span><br><span class="line">android_sdk_repository(</span><br><span class="line">    name = &quot;androidsdk&quot;,</span><br><span class="line">    api_level = $&#123;ANDROID_API_LEVEL&#125;,</span><br><span class="line">    build_tools_version = &quot;$&#123;ANDROID_BUILD_TOOLS_VERSION&#125;&quot;,</span><br><span class="line">    path = &quot;$&#123;ANDROID_SDK_HOME&#125;&quot;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">android_ndk_repository(</span><br><span class="line">    name=&quot;androidndk&quot;,</span><br><span class="line">    path=&quot;$&#123;ANDROID_NDK_HOME&#125;&quot;,</span><br><span class="line">    api_level=14)</span><br><span class="line">EOF</span><br><span class="line">    fi</span><br><span class="line">  fi</span><br><span class="line">&#125;</span><br><span class="line"> ~~~~~~~    </span><br><span class="line"></span><br><span class="line">å¾ˆæ˜æ˜¾ï¼Œè¿™æ®µè„šæœ¬æ˜¯åœ¨æ„å»ºAndroid Camera Demoçš„workspaceï¼Œä¸»è¦å°±æ˜¯ä¸ºäº†ç¡®è®¤å’Œæ ¹æ®ç³»ç»Ÿç¯å¢ƒå˜é‡çš„ä¿¡æ¯ä¿®è¡¥WORKSPACEæ–‡ä»¶.  </span><br><span class="line">ç®€å•çš„è¯´ï¼Œ</span><br></pre></td></tr></table></figure></p>
<p>if WORKSPACEæ–‡ä»¶ä¸­é…ç½®äº†SDKå’ŒNDKçš„ä¿¡æ¯ then æ„‰å¿«çš„å¼€å§‹ç¼–è¯‘å§<br>if WORKSPACEæ–‡ä»¶ä¸­æ²¡æœ‰SDKå’ŒNDK then æˆ‘å¥½å¿ƒçš„å¸®ä½ æ‰¾ä¸€æ‰¾æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ¥æ‰¾åˆ°ä¿¡æ¯å¹¶è¡¥å……åˆ°WORKSPACEæ–‡ä»¶ä¸­å‘€<br>if WORKSPACEæ–‡ä»¶ä¸­æ²¡æœ‰é…ç½® &amp; ä½ æ‡’åˆ°ç¯å¢ƒå˜é‡ä¹Ÿæ²¡æœ‰æ then è¿˜ç¼–ä¸ªæ¯›çº¿ å–æ±¤å»<br>```</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é…ç½®SDKå’ŒNDkï¼Œä½ éœ€è¦  </p>
<ol>
<li>ä¸‹å¥½æ­£ç¡®ç‰ˆæœ¬çš„SDKå’ŒNDK</li>
<li>å°†SDKå’ŒNDKçš„ç›¸å…³ä¿¡æ¯é€šè¿‡ä»¥ä¸‹ä»»ä¸€æ–¹å¼ä¼ é€ç»™é¡¹ç›®<ul>
<li>WORKSPACEæ–‡ä»¶</li>
<li>é…ç½®å…¨å±€ç¯å¢ƒå˜é‡<br>ANDROID_API_LEVELã€ANDROID_BUILD_TOOLS_VERSIONã€ANDROID_SDK_HOMEã€ANDROID_NDK_HOME</li>
</ul>
</li>
</ol>
<h2 id="V-Android-Camera-Demoç”¨åˆ°çš„çš„å››ä¸ªæ¨¡å‹"><a href="#V-Android-Camera-Demoç”¨åˆ°çš„çš„å››ä¸ªæ¨¡å‹" class="headerlink" title="V. Android Camera Demoç”¨åˆ°çš„çš„å››ä¸ªæ¨¡å‹"></a>V. Android Camera Demoç”¨åˆ°çš„çš„å››ä¸ªæ¨¡å‹</h2><p>Android Camera Demoæä¾›äº†å››ä¸ªsampleï¼Œå„ä¸ªsampleå…¶å®æ˜¯ç›´æ¥è°ƒç”¨äº†PCç«¯å·²ç»è®­ç»ƒå¥½çš„è½»é‡çº§çš„modelï¼Œè¿™äº›ä¸ªmodelçš„ä¿¡æ¯å¯ä»¥å‚ç…§githubä¸Šçš„è¯´æ˜ã€‚  </p>
<hr>
<p> TF Classify: Uses the Google Inception model to classify camera frames in real-time, displaying the top results in an overlay on the camera image.<br>TF Detect: Demonstrates an SSD-Mobilenet model trained using the Tensorflow Object Detection API introduced in Speed/accuracy trade-offs for modern convolutional object detectors to localize and track objects (from 80 categories) in the camera preview in real-time.<br>TF Stylize: Uses a model based on A Learned Representation For Artistic Style to restyle the camera preview image to that of a number of different artists.<br>TF Speech: Runs a simple speech recognition model built by the audio training tutorial. Listens for a small set of words, and highlights them in the UI when they are recognized.</p>
<hr>
<p>è¾£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼ŒAndroid Camera Demoä¾èµ–çš„å››ä¸ªmodelæ˜¯æ€ä¹ˆæ•´è¿›å·¥ç¨‹çš„å‘¢ï¼Ÿ<br>çœ‹ï¼æˆ‘ä»¬çš„WORKSPACEæ–‡ä»¶è¿™è¾¹è¿˜è—äº†è¿™ä¹ˆä¸€æ®µï½ï½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"># Please add all new TensorFlow dependencies in workspace.bzl.</span><br><span class="line">tf_workspace()</span><br><span class="line"></span><br><span class="line">new_http_archive(</span><br><span class="line">    name = &quot;inception5h&quot;,</span><br><span class="line">    build_file = &quot;models.BUILD&quot;,</span><br><span class="line">    sha256 = &quot;d13569f6a98159de37e92e9c8ec4dae8f674fbf475f69fe6199b514f756d4364&quot;,</span><br><span class="line">    urls = [</span><br><span class="line">        &quot;http://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip&quot;,</span><br><span class="line">        &quot;http://download.tensorflow.org/models/inception5h.zip&quot;,</span><br><span class="line">    ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">new_http_archive(</span><br><span class="line">    name = &quot;mobile_ssd&quot;,</span><br><span class="line">    build_file = &quot;models.BUILD&quot;,</span><br><span class="line">    sha256 = &quot;bddd81ea5c80a97adfac1c9f770e6f55cbafd7cce4d3bbe15fbeb041e6b8f3e8&quot;,</span><br><span class="line">    urls = [</span><br><span class="line">        &quot;http://storage.googleapis.com/download.tensorflow.org/models/object_detection/ssd_mobilenet_v1_android_export.zip&quot;,</span><br><span class="line">        &quot;http://download.tensorflow.org/models/object_detection/ssd_mobilenet_v1_android_export.zip&quot;,</span><br><span class="line">    ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">new_http_archive(</span><br><span class="line">    name = &quot;mobile_multibox&quot;,</span><br><span class="line">    build_file = &quot;models.BUILD&quot;,</span><br><span class="line">    sha256 = &quot;859edcddf84dddb974c36c36cfc1f74555148e9c9213dedacf1d6b613ad52b96&quot;,</span><br><span class="line">    urls = [</span><br><span class="line">        &quot;http://storage.googleapis.com/download.tensorflow.org/models/mobile_multibox_v1a.zip&quot;,</span><br><span class="line">        &quot;http://download.tensorflow.org/models/mobile_multibox_v1a.zip&quot;,</span><br><span class="line">    ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">new_http_archive(</span><br><span class="line">    name = &quot;stylize&quot;,</span><br><span class="line">    build_file = &quot;models.BUILD&quot;,</span><br><span class="line">    sha256 = &quot;3d374a730aef330424a356a8d4f04d8a54277c425e274ecb7d9c83aa912c6bfa&quot;,</span><br><span class="line">    urls = [</span><br><span class="line">        &quot;http://storage.googleapis.com/download.tensorflow.org/models/stylize_v1.zip&quot;,</span><br><span class="line">        &quot;http://download.tensorflow.org/models/stylize_v1.zip&quot;,</span><br><span class="line">    ],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">new_http_archive(</span><br><span class="line">    name = &quot;speech_commands&quot;,</span><br><span class="line">    build_file = &quot;models.BUILD&quot;,</span><br><span class="line">    sha256 = &quot;c3ec4fea3158eb111f1d932336351edfe8bd515bb6e87aad4f25dbad0a600d0c&quot;,</span><br><span class="line">    urls = [</span><br><span class="line">        &quot;http://storage.googleapis.com/download.tensorflow.org/models/speech_commands_v0.01.zip&quot;,</span><br><span class="line">        &quot;http://download.tensorflow.org/models/speech_commands_v0.01.zip&quot;,</span><br><span class="line">    ],</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨Bazelæ¥ç¼–è¯‘apkçš„æ—¶å€™ï¼Œbazelä¼šè‡ªåŠ¨å»ä¸‹è½½modelã€‚<br>å¦‚æœä½ ç”¨AndroidStudioç›´æ¥æ¥ç¼–apkçš„è¯ï¼Œæ˜¯éœ€è¦æ‰‹åŠ¨å»ä¸‹è½½è¿™äº›modelçš„ï¼Œå¹¶ä¸”ä½ éœ€è¦åœ¨<br><strong>build.gradle</strong><br>æ–‡ä»¶ä¸­ï¼Œå°†ä½ çš„bazelçš„ç¯å¢ƒä¿¡æ¯æ›´æ–°è¿›å»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// If building with Bazel, this is the location of the bazel binary.</span><br><span class="line">// NOTE: Bazel does not yet support building for Android on Windows,</span><br><span class="line">// so in this case the Makefile build must be used as described above.</span><br><span class="line">def bazelLocation = &apos;/usr/local/bin/bazel&apos;</span><br></pre></td></tr></table></figure></p>
<h2 id="VI-Android-Camera-Demoçš„ç¼–è¯‘å’Œäº§ç‰©"><a href="#VI-Android-Camera-Demoçš„ç¼–è¯‘å’Œäº§ç‰©" class="headerlink" title="VI. Android Camera Demoçš„ç¼–è¯‘å’Œäº§ç‰©"></a>VI. Android Camera Demoçš„ç¼–è¯‘å’Œäº§ç‰©</h2><p> å‰é¢å‡ æ­¥çš„å‡†å¤‡éƒ½åšè¶³çš„è¯ï¼Œè¿™è¾¹ä½ åªéœ€è¦è½»è½»çš„æ•²ä¸‹<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bazel build tensorflow/examples/android:tensorflow_demo --verbose_failures</span><br></pre></td></tr></table></figure></p>
<p> ç„¶åå»æ‰“ä¸¤æŠŠçš‡å®¤ï¼Œå†å›æ¥çœ‹ç»“æœå°±å¯ä»¥äº†</p>
<p> ç¼–è¯‘ç»“æŸåï¼ŒAPKçš„è¾“å‡ºä½ç½®å¦‚ä¸‹  </p>
<p> bazel-bin/tensorflow/examples/android/<br> tensorflow_demo.apk</p>
<p> å°†è¿™ä¸ªapkè£…åˆ°ä½ çš„å®‰å“è®¾å¤‡ä¸Šå³å¯ã€‚</p>
<p>è£…å®Œåï¼Œä½ ä¼šå‘ç°ï¼Œä½ çš„launcherä¸Šé¢å‡ºç°äº†å››ä¸ªappï¼Œåˆ†åˆ«å¯¹åº”çš„Android Camera Demoçš„å››ä¸ªsample  ï½</p>
<ul>
<li>TF Classify</li>
<li>TF Detect</li>
<li>TF Stylize</li>
<li>TF Speech</li>
</ul>
<p>ç¼–å‡ºæ¥çš„apkï¼Œæˆ‘æ”¾çš„ç½‘ç›˜ä¸Šï¼Œéœ€è¦çš„åŒå­¦è‡ªå·±å»å–ï½  </p>
<hr>
<p>é“¾æ¥: <a href="https://pan.baidu.com/s/1i47cTtr" target="_blank" rel="noopener">https://pan.baidu.com/s/1i47cTtr</a><br>å¯†ç : 7an5</p>
<hr>
<h2 id="VII-å‚è€ƒèµ„æ–™"><a href="#VII-å‚è€ƒèµ„æ–™" class="headerlink" title="VII. å‚è€ƒèµ„æ–™ "></a>VII. å‚è€ƒèµ„æ–™ </h2><p> [1] <a href="http://blog.csdn.net/masa_fish/article/details/54097796" target="_blank" rel="noopener">http://blog.csdn.net/masa_fish/article/details/54097796</a><br> [2] <a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/README.md" target="_blank" rel="noopener">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/README.md</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/14/2017-11-14-TensorflowLiteForAndroid-post/" data-id="cjbw6hydy0002kxrb0qocjhbz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/01/01/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
    <a href="/2017/08/09/2017-08-09-Movies-post/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ã™ãƒ¼ã¡ã‚ƒã‚“ ã¾ã„ã¡ã‚ƒã‚“ ã•ã‚å­ã•ã‚“ (2013)</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/01/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/11/14/2017-11-14-TensorflowLiteForAndroid-post/">Mobileä¸Šé£èµ·çš„ç¥ç»ç½‘ç»œ-TensorFlowç¯‡</a>
          </li>
        
          <li>
            <a href="/2017/08/09/2017-08-09-Movies-post/">ã™ãƒ¼ã¡ã‚ƒã‚“ ã¾ã„ã¡ã‚ƒã‚“ ã•ã‚å­ã•ã‚“ (2013)</a>
          </li>
        
          <li>
            <a href="/2017/07/11/2013-08-17-test-post/">Pre Post</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Tsui Yu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>